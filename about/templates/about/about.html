{% extends "base.html" %}
{% load static %}
{% block page_header %}
<div class="container header-container">
</div>
{% endblock %}
{% block content %}
<section class="section-about">
   <div class="container">
      <div class="row justify-content-center text-center">
         <div class="col-12">
            <div class="header-section">
               <h2 class="title">About <span>Fit For Life</span></h2>
               <p class="description">Fit For Life is not just a brand, it is a lifestyle. At FFL we believe that a healthy lifestyle is key to a happy life.
                  We want to make the journey as easy as possible by helping our customers to reach their goals with our products and plans.It's time to get to know who we are, what we do and why we do it!
               </p>
            </div>
         </div>
      </div>
   </div>
   <div class="container">
      <div class="row justify-content-center">
         <!-- Start Single Service -->
         <div class="col-md-6 col-lg-4">
            <div class="single-service">
               <div class="part-1">
                  <i class="fas fa-user-circle center"></i>
                  <h2 class="center">
                 <h3> WHO</h3>
                  <p>Fit For Life founder Orla was unsatisfied working in a 9-5 office job when she decided to pursue her passion and follow her dream of becoming a personal trainer.
                  </p>
               </div>
            </div>
         </div>
         <!-- / End Single Service -->
         <!-- Start Single Service -->
         <div class="col-md-6 col-lg-4">
            <div class="single-service">
               <div class="part-1">
                  <i class="far fa-question-circle"></i>
                  <h2>WHY</h2>
                  <p>While studying the course she gained a keen interest in nutrition and the benefits of a high protein diet. She thought there was a gap in the market for high protein snacks.</p>
               </div>
            </div>
         </div>
         <!-- / End Single Service -->
         <!-- Start Single Service -->
         <div class="col-md-6 col-lg-4">
            <div class="single-service">
               <div class="part-1">
                  <i class="far fa-handshake"></i>
                  <h2>HOW</h2>
                  <p>Orla worked with a range of qualified professionals to create bars, drinks and supplements that not only taste great but provide a high source of protein and nutrients.</p>
               </div>
            </div>
         </div>
         <!-- / End Single Service -->
      </div>
   </div>
</section>
<div class="container-fluid">
   <div class="contact-section">
      <div class="row">
         <div class="col-12 text-center">
            <h1 class="title">get in touch</h1>
         </div>
      </div>
   </div>
   <div class="container">
      <div>
         {% if form.errors %}
         <p style="color: red;">
            Please correct the error{{ form.errors|pluralize }} below.
         </p>
         {% endif %}
      </div>
      <div class="col-12 justify-content-center">
         <form role="form " action="" method="post">
            {% csrf_token %}
            <div class="form-group">
               <label for="name"></label>
               {{ form.name.errors }}
               <input type="text" class="form-control" id="name" name="name" placeholder="Full Name" required>
               <!--placing icon using a span element-->
               <span class="icon fa fa-user fa-lg"></span>
            </div>
            <div class="form-group">
               <label for="email"></label>
               {{ form.email.errors }}
               <input type="email" class="form-control" id="id_email" name="email" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$" placeholder="Email Address" required>
               <span class="icon fa fa-envelope fa-lg"></span>
            </div>
            <div class="form-group">
               <label for="subject"></label>
               {{ form.subject.errors }}
               <input type="text" class="form-control" id="id_subject" name="subject" pattern=".{8,}" title="Please type eight or more characters" placeholder="Subject" required>
               <span class="icon fa fa-pencil fa-lg"></span>
            </div>
            <div class="form-group">
               <label for="message"></label>
               {{ form.message.errors }}
               <textarea rows="5" cols="30" id="id_message" name="message" id="message" placeholder="Message" pattern=".{10,}" title="10 or more characters" style="width:100%"></textarea>
               <span class="icon-textarea fa fa-paper-plane fa-lg "></span>
            </div>
            <div class="col-sm-12 text-center">
               <button type="submit" class="btn btn-default">Submit</button>
            </div>
         </form>
      </div>
   </div>
</div>
</div>
{% endblock %}
{% block postloadjs %}
{{ block.super }}
<script type="text/javascript">
   $('.btt-link').click(function(e) {
   	window.scrollTo(0,0)
   })
</script>
<script type="text/javascript">


// https://codepen.io/FlorinPop17/pen/OJJKQeK
// Valiation logic

function checkInputs() {
	// trim to remove the whitespaces
	const usernameValue = username.value.trim();
	const emailValue = email.value.trim();
	const passwordValue = password.value.trim();
	const password2Value = password2.value.trim();
	
	if(usernameValue === '') {
		setErrorFor(username, 'Username cannot be blank');
	} else {
		setSuccessFor(username);
	}
	
	if(emailValue === '') {
		setErrorFor(email, 'Email cannot be blank');
	} else if (!isEmail(emailValue)) {
		setErrorFor(email, 'Not a valid email');
	} else {
		setSuccessFor(email);
	}
	
	if(passwordValue === '') {
		setErrorFor(password, 'Password cannot be blank');
	} else {
		setSuccessFor(password);
	}
	
	if(password2Value === '') {
		setErrorFor(password2, 'Password2 cannot be blank');
	} else if(passwordValue !== password2Value) {
		setErrorFor(password2, 'Passwords does not match');
	} else{
		setSuccessFor(password2);
	}
}

function setErrorFor(input, message) {
	const formControl = input.parentElement;
	const small = formControl.querySelector('small');
	formControl.className = 'form-control error';
	small.innerText = message;
}

function setSuccessFor(input) {
	const formControl = input.parentElement;
	formControl.className = 'form-control success';
}
	
function isEmail(email) {
	return /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(email);
}













// SOCIAL PANEL JS
const floating_btn = document.querySelector('.floating-btn');
const close_btn = document.querySelector('.close-btn');
const social_panel_container = document.querySelector('.social-panel-container');

floating_btn.addEventListener('click', () => {
	social_panel_container.classList.toggle('visible')
});

close_btn.addEventListener('click', () => {
	social_panel_container.classList.remove('visible')
});

   jQuery('#message').on('keyup', function() {
      jQuery(this).parent().append('<p>' + this.checkValidity() + ' ' + this.validity.patternMismatch + '</p>'); 
   });

   $('#message').keyup(validateTextarea);

   function validateTextarea() {
      var errorMsg = "Please match the format requested.";
      var textarea = this;
      var pattern = new RegExp('^' + $(textarea).attr('pattern') + '$');
      // check each line of text
      $.each($(this).val().split("\n"), function () {
         // check if the line matches the pattern
         var hasError = !this.match(pattern);
         if (typeof textarea.setCustomValidity === 'function') {
               textarea.setCustomValidity(hasError ? errorMsg : '');
         } else {
               // Not supported by the browser, fallback to manual error display...
               $(textarea).toggleClass('error', !!hasError);
               $(textarea).toggleClass('ok', !hasError);
               if (hasError) {
                  $(textarea).attr('title', errorMsg);
               } else {
                  $(textarea).removeAttr('title');
               }
         }
         return !hasError;
      });
   }





$('form').submit(function (e) {
    var value;

    // "message" pattern : from 3 to 15 alphanumerical chars

    value = $('[name="message"]').val();
    if (!/^[A-Za-z0-9]{2,150}$/.test(value)) {
        alert('Need to enter at least 3 characters to submit this form.');
        e.preventDefault();

    }

});


</script>
{% endblock %}